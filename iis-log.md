## IIS Log

### FREB

1. 在指定服务器上运行`inetmgr`打开IIS管理器，在左侧面板展开机器名节点，展开站点，然后点击所需收集日志的站点。
2. 在右侧的操作面板，点击"配置"下的“失败请求跟踪...”, 确保勾选"启用"并保存, 注意调整跟踪日志的最大数量(如果此站点请求量较大)。
3. 在中间的“功能视图"面板中双击“失败请求跟踪规则”, 点击"操作"添加...”
4. 在打开的"添加失败请求跟踪规则"窗体上点击"下一步"进入跟踪条件设置界面。
5. 勾选"状态代码"并设置状态代码为所需的状态码，然后点击"下一步"。
6. 点击"完成"完成配置。
7. 重现问题，请求到达此服务器并且符合设置的条件时IIS会创建跟踪日志，默认位置为: `%SystemDrive%\inetpub\logs\FailedReqLogFiles\W3SVC<SiteID>`
8. 根据步骤2，取消勾选"启用"并保存以关闭此日志收集。
9. 一并收集HTTPERR日志:
  - HTTPERR日志位于C:\Windows\System32\LogFiles\HTTPERR, 请收集问题时段内的所有 httperr*.log文件

> 注：`<SiteID>`可以通过查看IIS管理器的左侧面包的“网站”节点获取。
